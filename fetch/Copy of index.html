<!-- REQUIRED META TAGS -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- PAGE META TAGS -->
<meta name="description" content="Kemedia IT and Development Services">
<meta name="author" content="Kemedia, LLC.">

<!-- TRACKING AFFILIATES AND BOTS -->
<meta name="robots" content="noindex, nofollow">
<meta name="googlebot" content="noindex, nofollow">

<!-- TITLE -->
<title>Fetch API</title>

<!-- LINK RELATIVE -->
<link rel="canonical" href="https://kemist.github.io/kemedia/">

<!-- ICONS -->
<link rel="icon" sizes="192x192" href="https://material.io/static/images/simple-lp/favicons/components-192x192.png">
<link rel="shortcut icon" href="https://material.io/static/images/simple-lp/favicons/components-72x72.png">

<!-- STYLES -->

<!-- STYLES/FONTS -->
<!-- Roboto, Noto Sans, Poppins, Roboto Condensed  -->
<link href="https://fonts.googleapis.com/css?family=Roboto:700,900" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Noto+Sans:400,400i,700,700i|Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i|Poppins|Roboto+Condensed:300,300i,400,400i,700,700i|Roboto:300,300i,400,400i,500,500i,700,700i,900,900i" rel="stylesheet">

<!-- STYLES/CSS -->

<!-- STYLES/CSS BS4 Core CSS -->
<link rel="stylesheet" type="text/css" href="https://kemist.github.io/kemedia/assets/css/bootstrap.css">
<link rel="stylesheet" type="text/css" href="https://kemist.github.io/kemedia/assets/css/bootstrap-grid.css">
<link rel="stylesheet" type="text/css" href="https://kemist.github.io/kemedia/assets/css/bootstrap-reboot.css">

                                                       
<!-- STYLES/CSS Font Awesome -->
<link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

<!-- STYLES/CSS Custom Styles For This Template -->
<!-- FIX ME bs-blog and starter-template.css-->
<link rel="stylesheet" type="text/css" href="/templates/bs-blog/bs-blog.css">
<link rel="stylesheet" type="text/css" href="kemedia/templates/navbar-top-fixed/starter-template.css">
<!-- <link rel="stylesheet" type="text/css" href="navbar-top-fixed.css"> -->
<style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }
      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
      body {
        padding-bottom: 20px;
      }
      .navbar {
         margin-bottom: 20px;
      }
    </style>
    
<!-- STYLES/CSS From Material Design / ESCAPED - TO BE DELETED-->
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/6.0.0/normalize.min.css"> -->
<!-- <link rel="stylesheet" href="bundle-login.css"> -->
<!-- STYLES/CSS From Bootstrap CDN / ESCAPED - IF NOT USED-->
<!-- <link rel="stylesheet" type="text/css" href="//stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css"> -->

<!-- SCRIPTS -->
<!-- SCRIPTS/ jQuery Library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<!-- SCRIPTS/ Popper JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<!-- SCRIPTS/ Latest Compiled BS4 JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.js"></script>
<!-- SCRIPTS/ Modernizer -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
<!-- SCRIPTS/ TODO: Missing CoffeeScript 2 -->
<script type="text/javascript">
  window.onload=function(){
    // CODE HERE
  }
</script>
<!-- SCRIPTS/ Dummy Script -->
<script type="text/javascript" src="/js/lib/dummy.js"></script>

</head>

<body>
<nav class="navbar navbar-expand-sm navbar-dark bg-dark">
  <a class="navbar-brand" href="#">Kemedia</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample03" aria-controls="navbarsExample03"
    aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarsExample03">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="#">Home
          <span class="sr-only">(current)</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Link</a>
      </li>
      <li class="nav-item">
        <a class="nav-link disabled" href="#">Disabled</a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="http://example.com" id="dropdown03" data-toggle="dropdown" aria-haspopup="true"
          aria-expanded="false">Apps</a>
        <div class="dropdown-menu" aria-labelledby="dropdown03">
          <a class="dropdown-item" href="#">Fetch</a>
          <a class="dropdown-item" href="#">Get Embed</a>
          <a class="dropdown-item" href="#">Post to WP</a>
        </div>
      </li>
    </ul>
    <form class="form-inline my-2 my-md-0">
      <input class="form-control" type="text" placeholder="Search">
    </form>
  </div>
</nav>
	
<div class="container">	
<h1 class="display-4">Fetch API</h1>
<br />
<button id="getPosts">Get Posts API</button>

<hr />

<form id="addPost">

<div class="input-group mb-3">
  <div class="input-group-prepend">
    <span class="Title-group-text" id="inputGroup-sizing-default">Default</span>
  </div>
  <input type="text" placeholder="Title" id="title" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
</div>
<!--	<div>
		<input type="text" id="title" placeholder="Title">
	</div>
	-->
	<div>
		<textarea id="body" placeholder="Body"></textarea>
	</div>
	<input type="submit" value="Submit">
</form>

<hr />

<form id="getData">
	<div>
		<input type="text" id="inputURL" placeholder="Input URL">
	</div>
	<div>
		<input type="checkbox" id="selParseEngine">
	</div>
	<input type="submit" value="Submit">
</form>

<form id="parseUrl">
	<label for="basic-url">Parse URL:</label>
<div class="input-group mb-3">
  <div class="input-group-prepend">
    <span class="input-group-text" id="basic-addon3">iframe.ly/api/iframely?url=/</span>
  </div>
  <input type="text" class="form-control" id="inputUrl" aria-describedby="basic-addon3">
  <div class="input-group-append">
    <span class="input-group-text" id="basic-addon3">&api_key=57924d18254bf0be219387</span>
  </div>
  <input type="submit" value="Submit">
</div>


</form>
	
<div id="output"></div>
</div>

<script>
// Event Listeners
document.getElementById('getPosts').addEventListener('click', getPosts);
document.getElementById('addPost').addEventListener('submit', addPost);
document.getElementById('getData').addEventListener('submit', getData);
document.getElementById('parseUrl').addEventListener('submit', parseUrl);

// Variables
var inputURL = document.getElementById('getData').value;
var inputURL = document.getElementById('parseUrl').value;
var encodedInputURL = encodeURIComponent(inputURL);

var apiEndpoint = "https://jsonplaceholder.typicode.com/posts";
var iframelyApiEndpointURL = "iframe.ly/api/iframely?url=" + encodedInputURL + "&api_key=57924d18254bf0be219387";

// Function: Get Posts
function getPosts(){
	fetch(apiEndpoint)
	.then((res) => res.json())
	.then((data) => {
		let output = '<h2>Posts</h2>';
		data.forEach(function(post) {
			output += `
				<div class="card text-white bg-dark mb-3">
					<div class="card-header text-white px-4 h4 font-weight-light">Header</div>
					<div class="card-body text-white px-3">
						<h5 class="card-title text-info text-capitalize font-weight-bold px-2">${post.title}</h5>
						<p class="card-text px-2">${post.body}</p>
						<a href="#" class="btn btn-primary pl-6">Read More</a>
					</div>
				</div>
			`;
		});
		document.getElementById('output').innerHTML = output;
	})
}

// Function: Add Post
function addPost(e) {
	e.preventDefault();
	
	let title = document.getElementById('title').value;
	let body = document.getElementById('body').value;

	fetch(apiEndpoint, {
		method:'POST',
		headers: {
		'Accept':'application/json, text/plain, */*',
		'Content-type':'application/json'
		},
		body:JSON.stringify({title:title, body:body})
	})
	.then((res) => res.json())
	.then((data) => console.log(data))
}

// Function Get Data (Parse URL)
function getData(e) {
	e.preventDefault();
	
	fetch(iframelyApiEndpointURL)
	.then((res) => res.json())
	.then((data) => {
		let output = '<h2>Get Data Output</h2>';
		data.forEach(function(post) {
			output += `
				<div>
					<h3>${post.title}</h3>
					<p>${post.body}</p>
				</div>
			`;
		});
		document.getElementById('output').innerHTML = output;
	})
}

// Function parseURL
function parseUrl(){
	fetch(iframelyApiEndpointURL)
	.then((res) => res.json())
	.then((data) => {
		let output = '<h2>Posts</h2>';
		data.forEach(function(post) {
			output += `
				<div class="card text-white bg-dark mb-3">
					<div class="card-header text-white px-4 h4 font-weight-light">Header</div>
					<div class="card-body text-white px-3">
						<h5 class="card-title text-info text-capitalize font-weight-bold px-2">${post.title}</h5>
						<p class="card-text px-2">${post.body}</p>
						<a href="#" class="btn btn-primary pl-6">Read More</a>
					</div>
				</div>
			`;
		});
		document.getElementById('output').innerHTML = output;
	})
}

</script>


</body>
</html>
